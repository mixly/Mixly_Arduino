<xml version="Mixly 2.0 rc3" board="Arduino ESP32@M5Stick-C"><block type="factory_notes" id="lb6Z/r;q4m^d1.a=:(eK" x="-1489" y="-814"><field name="VALUE">ESPnow是一种短距离无线通讯方式，可以一对一或者一对多，多对多通讯&amp;#10;一对一时需要获取对方的MAC地址作为信息接收地址，将发送地址修改为&amp;#10;通配符FF:FF:FF:FF:FF:FF可向所有设备发送消息，使用两块开发板，一块先&amp;#10;获取自身MAC地址并上传ESPnow接收程序，另一块开发板分别上传指定MAC&amp;#10;地址与通配符MAC地址，对比其中差异</field><next><block type="factory_notes" id="G83RR-30ev9D1HtfNH-{"><field name="VALUE">思考如何使用通配符向多个设备发送消息，同时接收端进行区分消息来源</field><next><block type="factory_notes" id="`WT=x~]FA+$W7+a{0b{5"><field name="VALUE">提示发送与接收消息时都包含己方与接收方的MAC地址，通过MAC地址&amp;#10;判断消息来源与接收者</field></block></next></block></next></block><block type="base_setup" id="1=*I*5G5Q~OgU0gw:A!T" x="-1491" y="-576"><statement name="DO"><block type="serial_begin" id="kp=0A/a)VJ~.Uk+?6+-o"><field name="serial_select">Serial</field><value name="CONTENT"><shadow type="math_number" id="L)P/Q_;0@$OTB,I99pUv"><field name="NUM">9600</field></shadow></value><next><block type="serial_print" id=":;:0[mGdkC+Yo9^SRrKt"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="network_get_connect" id="$:26D[-u#Y//#T}NFDXu"><field name="mode">MAC</field></block></value></block></next></block></statement></block><block type="simple_timer" id="N):zK7bt?84Q9?,G@=.o" x="-1493" y="-447"><field name="NO">1</field><value name="timein"><shadow type="math_number" id="O,8Ms)M_Pg54Q|x,VfyO"><field name="NUM">1000</field></shadow></value><statement name="zxhs"><block type="folding_block" id="En:ORb|Nc(,5H{nS5!32" disabled="true"><field name="peien">将MAC地址修改为FF:FF:FF:FF:FF:FF可群发消息给所有设备</field><statement name="DO"><block type="esp_now_send" id="t/t}|tDhTfNB:SjBhacU"><value name="mac"><block type="text" id="KEbrDk`e|=P/G@FlR(Yu"><field name="TEXT">FF:FF:FF:FF:FF:FF</field></block></value><value name="data"><block type="text_join" id=":~W=t=(9uQdPv,eU{=cc"><value name="A"><shadow type="text" id="3+OmUJRV#b_+69AC-,/E"><field name="TEXT">random </field></shadow></value><value name="B"><shadow xmlns="http://www.w3.org/1999/xhtml" type="text"><field name="TEXT">Mixly</field></shadow><block type="math_random_int" id="*lF@dK`n0@w?I#WhgL9/"><value name="FROM"><shadow type="math_number" id="0:N2..V6cZA?F~fSju9u"><field name="NUM">1</field></shadow></value><value name="TO"><shadow type="math_number" id="eSP*)5Eic|n6~@wywP*R"><field name="NUM">100</field></shadow></value></block></value></block></value><statement name="success"><block type="serial_println" id="Yq.{+#y0BFssFhG(f]q:"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="text" id="~jR:;P=YFWi#IKnEKUSK"><field name="TEXT">Sent with success</field></block></value></block></statement><statement name="failure"><block type="serial_println" id="iQf/B{AD4-XjL0(a,hNz"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="text" id="V{8Cc]WuLX5m(E,k$+J7"><field name="TEXT">Error sending the data</field></block></value></block></statement></block></statement><next><block type="folding_block" id="hfmJ6vj5FD,Q,x(ow{P5"><field name="peien">指定MAC地址可以发送消息给指定设备</field><statement name="DO"><block type="esp_now_send" id="UZCEXl,pMV.ao+*}Yks."><value name="mac"><block type="text" id="Io~iy=zDaIPX`S?L}mx]"><field name="TEXT">30:AE:A4:58:9D:7C</field></block></value><value name="data"><block type="text_join" id="s.bWTK29dY$xE~tmaUW!"><value name="A"><shadow type="text" id="$eV|ts@d08Qn`!S*tOr4"><field name="TEXT">random </field></shadow></value><value name="B"><shadow type="text"><field name="TEXT">Mixly</field></shadow><block type="math_random_int" id="DZD~T!D|2-NHSS+Wj`r@"><value name="FROM"><shadow type="math_number" id="z^PTsDv-4FU=ETmg$Dbs"><field name="NUM">1</field></shadow></value><value name="TO"><shadow type="math_number" id=":VFzsWo+SWh$*WUO8Wcy"><field name="NUM">100</field></shadow></value></block></value></block></value><statement name="success"><block type="serial_println" id="jCCmVGMFw$VIwm,t9X2w"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="text" id="qrykBX*J(Mezm2J/FITl"><field name="TEXT">Sent with success</field></block></value></block></statement><statement name="failure"><block type="serial_println" id="((GeF,Gj2kMc{@k7`XPi"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="text" id="wsgZ^sR7|pS52Iwz`djO"><field name="TEXT">Error sending the data</field></block></value></block></statement></block></statement></block></next></block></statement></block><block type="esp_now_receive" id="yPL#P){(-a18miV#l;;h" disabled="true" x="-1491" y="113"><statement name="receive_data"><block type="serial_println" id="MR.^-:?^{Lj!?b5U|LC:"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="variables_get" id="P,Bt/2Md1`[Qc{[=W33Q"><field name="VAR">myData</field></block></value></block></statement></block></xml><config>{"PartitionScheme":"default","UploadSpeed":"1500000"}</config><code>CiNpbmNsdWRlIDxXaUZpLmg+CiNpbmNsdWRlIDxXaUZpLmg+CiNpbmNsdWRlIDxXaWZpRXNwTm93Lmg+CiNpbmNsdWRlIDxTaW1wbGVUaW1lci5oPgoKdWludDhfdCBQRUVSXzMwQUVBNDU4OUQ3Q1tdID0gezB4MzAsIDB4QUUsIDB4QTQsIDB4NTgsIDB4OUQsIDB4N0N9OwoKU2ltcGxlVGltZXIgdGltZXI7Cgpib29sIHNlbmRNZXNzYWdlKFN0cmluZyBfZGF0YSkgewogIGNoYXIgX21zZ1sxMDBdOwogIHVpbnQ4X3QgX2xlbiA9IHNucHJpbnRmKF9tc2csIDEwMCwgIiVzIiwgX2RhdGEpOwogIHJldHVybiBXaWZpRXNwTm93LnNlbmQoUEVFUl8zMEFFQTQ1ODlEN0MsIHJlaW50ZXJwcmV0X2Nhc3Q8Y29uc3QgdWludDhfdCo+KF9tc2cpLCBfbGVuKTsKfQoKdm9pZCBTaW1wbGVfdGltZXJfMSgpIHsKICBpZiAoc2VuZE1lc3NhZ2UoU3RyaW5nKCJyYW5kb20gIikgKyBTdHJpbmcoKHJhbmRvbSgxLCAxMDApKSkpKSB7CiAgICAgIFNlcmlhbC5wcmludGxuKCJTZW50IHdpdGggc3VjY2VzcyIpOwogICAgfSBlbHNlIHsKICAgICAgU2VyaWFsLnByaW50bG4oIkVycm9yIHNlbmRpbmcgdGhlIGRhdGEiKTsKICAgIH0KfQoKdm9pZCBzZXR1cCgpewogIFNlcmlhbC5iZWdpbig5NjAwKTsKICBTZXJpYWwucHJpbnRsbihXaUZpLm1hY0FkZHJlc3MoKSk7CgogIFdpRmkubW9kZShXSUZJX1NUQSk7CgogIFNlcmlhbC5wcmludCgi5b2T5YmN6K6+5aSHTUFDOiIpOwogIFNlcmlhbC5wcmludGxuKFdpRmkubWFjQWRkcmVzcygpKTsKCiAgYm9vbCBvayA9IFdpZmlFc3BOb3cuYmVnaW4oKTsKICBpZiAoIW9rKSB7CiAgICBTZXJpYWwucHJpbnRsbigiV2lmaUVzcE5vd+WIneWni+WMluWksei0pSIpOwogICAgRVNQLnJlc3RhcnQoKTsKICB9CgogIG9rID0gV2lmaUVzcE5vdy5hZGRQZWVyKFBFRVJfMzBBRUE0NTg5RDdDLCAwLCBudWxscHRyLCBXSUZJX0lGX1NUQSk7CiAgaWYgKCFvaykgewogICAgU2VyaWFsLnByaW50bG4oIldpZmlFc3BOb3cuYWRkUGVlcigpIGZhaWxlZCIpOwogICAgRVNQLnJlc3RhcnQoKTsKICB9CiAgdGltZXIuc2V0SW50ZXJ2YWwoMTAwMEwsIFNpbXBsZV90aW1lcl8xKTsKCn0KCnZvaWQgbG9vcCgpewogIC8vRVNQbm935piv5LiA56eN55+t6Led56a75peg57q/6YCa6K6v5pa55byP77yM5Y+v5Lul5LiA5a+55LiA5oiW6ICF5LiA5a+55aSa77yM5aSa5a+55aSa6YCa6K6vCiAgLy/kuIDlr7nkuIDml7bpnIDopoHojrflj5blr7nmlrnnmoRNQUPlnLDlnYDkvZzkuLrkv6Hmga/mjqXmlLblnLDlnYDvvIzlsIblj5HpgIHlnLDlnYDkv67mlLnkuLoKICAvL+mAmumFjeespkZGOkZGOkZGOkZGOkZGOkZG5Y+v5ZCR5omA5pyJ6K6+5aSH5Y+R6YCB5raI5oGv77yM5L2/55So5Lik5Z2X5byA5Y+R5p2/77yM5LiA5Z2X5YWICiAgLy/ojrflj5boh6rouqtNQUPlnLDlnYDlubbkuIrkvKBFU1Bub3fmjqXmlLbnqIvluo/vvIzlj6bkuIDlnZflvIDlj5Hmnb/liIbliKvkuIrkvKDmjIflrppNQUMKICAvL+WcsOWdgOS4jumAmumFjeespk1BQ+WcsOWdgO+8jOWvueavlOWFtuS4reW3ruW8ggogIC8v5oCd6ICD5aaC5L2V5L2/55So6YCa6YWN56ym5ZCR5aSa5Liq6K6+5aSH5Y+R6YCB5raI5oGv77yM5ZCM5pe25o6l5pS256uv6L+b6KGM5Yy65YiG5raI5oGv5p2l5rqQCiAgLy/mj5DnpLrlj5HpgIHkuI7mjqXmlLbmtojmga/ml7bpg73ljIXlkKvlt7HmlrnkuI7mjqXmlLbmlrnnmoRNQUPlnLDlnYDvvIzpgJrov4dNQUPlnLDlnYAKICAvL+WIpOaWrea2iOaBr+adpea6kOS4juaOpeaUtuiAhQoKICB0aW1lci5ydW4oKTsKCn0=</code>