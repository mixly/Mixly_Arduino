<xml version="Mixly 2.0 rc3" board="Arduino ESP8266@Generic ESP8266 Module"><variables><variable id="b_6zk]@?-kIJl`5ZO+/p">WiFi名称</variable><variable id="z20N#U=4p8/^0sh6{104">WiFi密码</variable><variable id="4m$a4[bM49Ud_Nx#CZQ3">超时时间（ms）</variable></variables><block type="factory_notes" id="EEHP|Mn+f`ndRWlZUWEM" x="-1480" y="-460"><field name="VALUE">在使用物联网的过程中，我们发现当开发板无法连接网络时&amp;#10;会发现程序会陷入循环当中导致其他程序无法正常执行，&amp;#10;因此我们需要知道网络是否连接成功，如果网络连接异常那么&amp;#10;我们应当设置一个超时时间，这样我们就可以在网络连接失败时&amp;#10;启用“离线模式”</field></block><block type="procedures_defreturn" id="#!s^vP/.iuQ$L:4=3h)-" x="-959" y="-464"><mutation><arg name="WiFi名称" varid="b_6zk]@?-kIJl`5ZO+/p" vartype="String"></arg><arg name="WiFi密码" varid="z20N#U=4p8/^0sh6{104" vartype="String"></arg><arg name="超时时间（ms）" varid="4m$a4[bM49Ud_Nx#CZQ3" vartype="int"></arg></mutation><field name="NAME">WiFi连接</field><field name="TYPE">boolean</field><statement name="STACK"><block type="factory_include" id="7on=[P$?BcrH;7ev)2;B"><field name="INCLUDE">ESP8266WiFi</field><next><block type="variables_declare" id="h+YWTLNv!z*rdk.Di13u"><field name="variables_type">local_variate</field><field name="VAR">WiFi连接状态</field><field name="TYPE">boolean</field><value name="VALUE"><block type="logic_boolean" id="W;,P]h7:yF~rG8FU5dk0"><field name="BOOL">FALSE</field></block></value><next><block type="variables_declare" id="^r+diJ0=Lwc0@`rnk_PT"><field name="variables_type">local_variate</field><field name="VAR">系统运行时间</field><field name="TYPE">uint16_t</field><value name="VALUE"><block type="controls_millis" id="7b1hAVP+[X6fR@i|4~h["><field name="UNIT">millis</field></block></value><next><block type="factory_callMethod_noreturn" id="#20Tv70)#4L/xQ1TvH.)"><mutation items="2"><arg name="WiFi名称"></arg><arg name="WiFi密码"></arg></mutation><field name="NAME">WiFi</field><field name="METHOD">begin</field><value name="ADD0"><block type="variables_get" id=".O$@vEda.e2K_Mo6Wf{h"><field name="VAR">WiFi名称</field></block></value><value name="ADD1"><block type="variables_get" id="G8}/N;~2k2$g3N)dR;BQ"><field name="VAR">WiFi密码</field></block></value><next><block type="controls_whileUntil" id="H75eJnzKcn*z/W6KA9Mw"><field name="MODE">WHILE</field><value name="BOOL"><shadow type="logic_boolean" id="s7LZg/ZWEgB]=6sq]uX@"><field name="BOOL">TRUE</field></shadow><block type="factory_block_return" id="*$}92zEFZJ(4Wl_Pj2~)"><field name="VALUE">WiFi.status() != WL_CONNECTED</field></block></value><statement name="DO"><block type="controls_delay" id="n!X2IGnb?!IFYfs.-vqC"><field name="UNIT">delay</field><value name="DELAY_TIME"><shadow type="math_number" id="6fI7V,Xv#pHvtW#~m$1K"><field name="NUM">50</field></shadow></value><next><block type="serial_println" id="PHA,clgLs/U4})OSWfCJ"><field name="serial_select">Serial</field><field name="new_line">print</field><value name="CONTENT"><block type="text" id="+FfkA-mSqr_XzI=hasT@"><field name="TEXT">.</field></block></value><next><block type="controls_if" id="pzVSQ9Khs}TAX!-|_IQp"><value name="IF0"><block type="logic_compare" id="c-:Q/1{rjFR~sw:1NQ/$"><field name="OP">GTE</field><value name="A"><block type="math_arithmetic" id="b2hVz1pya;3:9;bG=0)n"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="X{ZxgTJ*KO^a`M9]!d2j"><field name="NUM">1</field></shadow><block type="controls_millis" id="j;jzZyjStCtym8DJzp0N"><field name="UNIT">millis</field></block></value><value name="B"><shadow type="math_number" id="L=l.I4UtuL9I*uV}jmWX"><field name="NUM">1</field></shadow><block type="variables_get" id="1NExU1gI15`1NV10^_T("><field name="VAR">系统运行时间</field></block></value></block></value><value name="B"><block type="variables_get" id="+ssL:=_~US[@^bN7$I:T"><field name="VAR">超时时间（ms）</field></block></value></block></value><statement name="DO0"><block type="controls_flow_statements" id="GzT^erRXm0Zs;Ke{r?oa"><field name="FLOW">BREAK</field></block></statement></block></next></block></next></block></statement><next><block type="serial_println" id="N$Kp2p2~Ld2Peib@}zc3"><field name="serial_select">Serial</field><field name="new_line">println</field><next><block type="controls_if" id="24`0jO~GB7vt0}~]XICX"><value name="IF0"><block type="logic_negate" id="I39y^wLWuatW5-e=)[b="><value name="BOOL"><block type="factory_block_return" id=";ZN|f8BeD0rn;DnSe+{="><field name="VALUE">(WiFi.status() != WL_CONNECTED)</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="?a)G,TzNugs*-=RDu9CI"><field name="VAR">WiFi连接状态</field><value name="VALUE"><block type="logic_boolean" id="(WPu)Au9W`N=jt1I~1Vc"><field name="BOOL">TRUE</field></block></value><next><block type="serial_println" id="`tQ~T{kJXDYf+11:mx/^"><field name="serial_select">Serial</field><field name="new_line">print</field><value name="CONTENT"><block type="text" id="S?VsO}F59]=B#0G1FG{K"><field name="TEXT">Local IP:</field></block></value><next><block type="serial_println" id="[uK7?*^64/w=Gn|z?m_$"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="factory_block_return" id="DS{RlY8e;@0VE0(Y#RrI"><field name="VALUE">WiFi.localIP()</field></block></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><value name="RETURN"><block type="variables_get" id="kgcOk]@0ltf*8~|MP!i~"><field name="VAR">WiFi连接状态</field></block></value></block><block type="base_setup" id="`3=i@:Ev/KPu=[itlKV?" x="-1480" y="-316"><statement name="DO"><block type="controls_if" id="yr;42rg[VcRJh![w)*,s"><mutation else="1"></mutation><value name="IF0"><block type="procedures_callreturn" id="gyHPtO*Q*o|C)Oe@^Eo|"><mutation name="WiFi连接"><arg name="WiFi名称"></arg><arg name="WiFi密码"></arg><arg name="超时时间（ms）"></arg></mutation><value name="ARG0"><block type="text" id="JO4rsMC#vOyrlyhb^Hfg"><field name="TEXT">mixly</field></block></value><value name="ARG1"><block type="text" id="RKi*nEsR_lA84|vtV@}!"><field name="TEXT">666</field></block></value><value name="ARG2"><block type="math_number" id="k9*;8yIF`_~Io.j}1`+p"><field name="NUM">10000</field></block></value></block></value><statement name="DO0"><block type="serial_println" id="bwc_{1i50i_|!YR=)V-/"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="text" id="PUo#Lf9Scy=a,V:3JQuD"><field name="TEXT">WiFi连接成功</field></block></value></block></statement><statement name="ELSE"><block type="serial_println" id="jqu@5Iyvqc:e!#?nx*:0"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="text" id="pYLU9[G7Uj?6]}T4CJot"><field name="TEXT">WiFi连接失败</field></block></value></block></statement></block></statement></block></xml><config>{"mmu":"3232","CrystalFreq":"26","FlashFreq":"40","FlashMode":"dout","eesz":"1M64"}</config><code>CiNpbmNsdWRlIDxFU1A4MjY2V2lGaS5oPgoKYm9vbGVhbiBXaUZpX0U4X0JGXzlFX0U2XzhFX0E1KFN0cmluZyBXaUZpX0U1XzkwXzhEX0U3X0E3X0IwLCBTdHJpbmcgV2lGaV9FNV9BRl84Nl9FN19BMF84MSwgaW50IF9FOF9CNl84NV9FNl85N19CNl9FNl85N19CNl9FOV85N19CNF9FRl9CQ184OG1zX0VGX0JDXzg5KSB7CiAgYm9vbGVhbiBXaUZpX0U4X0JGXzlFX0U2XzhFX0E1X0U3XzhBX0I2X0U2XzgwXzgxID0gZmFsc2U7CiAgdWludDE2X3QgX0U3X0IzX0JCX0U3X0JCXzlGX0U4X0JGXzkwX0U4X0ExXzhDX0U2Xzk3X0I2X0U5Xzk3X0I0ID0gbWlsbGlzKCk7CiAgV2lGaS5iZWdpbihXaUZpX0U1XzkwXzhEX0U3X0E3X0IwLCBXaUZpX0U1X0FGXzg2X0U3X0EwXzgxKTsKICB3aGlsZSAoV2lGaS5zdGF0dXMoKSAhPSBXTF9DT05ORUNURUQpIHsKICAgIGRlbGF5KDUwKTsKICAgIFNlcmlhbC5wcmludCgiLiIpOwogICAgaWYgKG1pbGxpcygpIC0gX0U3X0IzX0JCX0U3X0JCXzlGX0U4X0JGXzkwX0U4X0ExXzhDX0U2Xzk3X0I2X0U5Xzk3X0I0ID49IF9FOF9CNl84NV9FNl85N19CNl9FNl85N19CNl9FOV85N19CNF9FRl9CQ184OG1zX0VGX0JDXzg5KSB7CiAgICAgIGJyZWFrOwoKICAgIH0KICB9CiAgU2VyaWFsLnByaW50bG4oIiIpOwogIGlmICghKFdpRmkuc3RhdHVzKCkgIT0gV0xfQ09OTkVDVEVEKSkgewogICAgV2lGaV9FOF9CRl85RV9FNl84RV9BNV9FN184QV9CNl9FNl84MF84MSA9IHRydWU7CiAgICBTZXJpYWwucHJpbnQoIkxvY2FsIElQOiIpOwogICAgU2VyaWFsLnByaW50bG4oV2lGaS5sb2NhbElQKCkpOwoKICB9CiAgcmV0dXJuIFdpRmlfRThfQkZfOUVfRTZfOEVfQTVfRTdfOEFfQjZfRTZfODBfODE7Cn0KCnZvaWQgc2V0dXAoKXsKICBTZXJpYWwuYmVnaW4oOTYwMCk7CiAgaWYgKFdpRmlfRThfQkZfOUVfRTZfOEVfQTUoIm1peGx5IiwgIjY2NiIsIDEwMDAwKSkgewogICAgU2VyaWFsLnByaW50bG4oIldpRmnov57mjqXmiJDlip8iKTsKCiAgfSBlbHNlIHsKICAgIFNlcmlhbC5wcmludGxuKCJXaUZp6L+e5o6l5aSx6LSlIik7CgogIH0KfQoKdm9pZCBsb29wKCl7CiAgLy/lnKjkvb/nlKjnianogZTnvZHnmoTov4fnqIvkuK3vvIzmiJHku6zlj5HnjrDlvZPlvIDlj5Hmnb/ml6Dms5Xov57mjqXnvZHnu5zml7YKICAvL+S8muWPkeeOsOeoi+W6j+S8mumZt+WFpeW+queOr+W9k+S4reWvvOiHtOWFtuS7lueoi+W6j+aXoOazleato+W4uOaJp+ihjO+8jAogIC8v5Zug5q2k5oiR5Lus6ZyA6KaB55+l6YGT572R57uc5piv5ZCm6L+e5o6l5oiQ5Yqf77yM5aaC5p6c572R57uc6L+e5o6l5byC5bi46YKj5LmICiAgLy/miJHku6zlupTlvZPorr7nva7kuIDkuKrotoXml7bml7bpl7TvvIzov5nmoLfmiJHku6zlsLHlj6/ku6XlnKjnvZHnu5zov57mjqXlpLHotKXml7YKICAvL+WQr+eUqOKAnOemu+e6v+aooeW8j+KAnQoKfQ==</code>