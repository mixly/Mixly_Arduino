<xml version="Mixly 2.0 rc2" board="Arduino AVR@Arduino/Genuino Uno"><block type="factory_notes" id="Z:T0i606.u^bu28KkLI*" x="-1073" y="-672"><field name="VALUE">打印SD卡参数与读写测试</field><next><block type="factory_notes" id="yQ;)--[/3Xjy1J)-L640"><field name="VALUE">SD卡拥有超大的存储容量，一般用来保存检测传感器数据与系统参数&amp;#10;如温湿度数据等，通常保存的数据要加上时间戳</field><next><block type="store_sd_init" id="9*qGjkIO)cZe4~6yQMd9"><value name="PIN_MOSI"><shadow type="pins_MOSI" id="Xxx$*uw*)4uP~xvldb@e"><field name="PIN">11</field></shadow></value><value name="PIN_MISO"><shadow type="pins_MISO" id="l?gw+`X+PBk*znkw1K*+"><field name="PIN">12</field></shadow></value><value name="PIN_SCK"><shadow type="pins_SCK" id=";aUB2u]Rvj=_4zpaT[7S"><field name="PIN">13</field></shadow></value><value name="PIN_CS"><shadow type="pins_digital" id="4V!E8cvI,rQecxpu8O3~"><field name="PIN">4</field></shadow></value></block></next></block></next></block><block type="base_setup" id="o0Iz/2`3Qa-ksDo$^hWO" x="-1071" y="-407"><statement name="DO"><block type="serial_print" id="eraC9+QxLv7fP]1AiV=s"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="sd_card_type" id="{$ONa7DDAl[~`#:VMbKI"></block></value><next><block type="serial_print" id="4r(w~rt+FX^Ow#fU_3qC"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="sd_volume" id="Dg,T:n/J#.zUhYfy?s;N"><field name="volume_TYPE">volume.blocksPerCluster()*volume.clusterCount()/2/1024/1024.0</field></block></value><next><block type="sd_card_root_files" id=".EX-iPNnp5hsDaB9x]!x"><next><block type="controls_if" id="G-dYh.T:epTk|iGEHkML"><value name="IF0"><block type="sd_exist" id="p:JWeeZ?;]8[L?9T4^#j"><value name="FileName"><shadow type="text" id="{@!U.5E{Df8_YQ[T^6Z)"><field name="TEXT">fileName.txt</field></shadow></value></block></value><statement name="DO0"><block type="serial_print" id="Zw,QEMT]M97ADlgGZBkW"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="sd_read" id="j33DMlel.)YI!cCS9@;y"><value name="FileName"><shadow type="text" id="jlNVBgj?$b^6l$!b+H4r"><field name="TEXT">fileName.txt</field></shadow></value></block></value></block></statement><next><block type="store_sd_write" id="5cYfG7?4QTlOxx_T~p=z"><value name="FILE"><shadow type="text" id="9RlGW:+S[f4@ayODx0,J"><field name="TEXT">fileName.txt</field></shadow></value><value name="DATA"><shadow type="text" id="X6El[-QGY+p6f;[+BheX"><field name="TEXT">hello world</field></shadow></value><value name="NEWLINE"><shadow type="logic_boolean" id="DSch$)I!_sdS^TUqI}]X"><field name="BOOL">TRUE</field></shadow></value><next><block type="sd_DelFile" id="Kp7|!QWz|cR8H7UEoyy8" disabled="true"><value name="FileName"><shadow type="text" id="HJVm@qfXRy@ovhY3p7fr"><field name="TEXT">fileName.txt</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml><code>CiNpbmNsdWRlIDxTRC5oPgojaW5jbHVkZSA8U1BJLmg+CgpTZDJDYXJkIGNhcmQ7ClNkVm9sdW1lIHZvbHVtZTsKU2RGaWxlIHJvb3Q7CkZpbGUgZGF0YWZpbGU7ClN0cmluZyBTRF9jYXJkX3JlYWRpbmcoU3RyaW5nIHBhdGgpIHsKZGF0YWZpbGUgPSBTRC5vcGVuKHBhdGgpOwogU3RyaW5nIHNkX2RhdGEgPSAiIjsKIHdoaWxlIChkYXRhZmlsZS5hdmFpbGFibGUoKSkgewogIHNkX2RhdGEgPSBTdHJpbmcoc2RfZGF0YSkgKyBTdHJpbmcoY2hhcihkYXRhZmlsZS5yZWFkKCkpKTsKIH0KICByZXR1cm4gc2RfZGF0YTsKfQoKdm9pZCBzZXR1cCgpewogIFNELmJlZ2luKDQpOwogIGNhcmQuaW5pdChTUElfSEFMRl9TUEVFRCwgNCk7CiAgU2VyaWFsLmJlZ2luKDk2MDApOwogIHZvbHVtZS5pbml0KGNhcmQpOwogIFNlcmlhbC5wcmludGxuKGNhcmQudHlwZSgpKTsKICBTZXJpYWwucHJpbnRsbih2b2x1bWUuYmxvY2tzUGVyQ2x1c3RlcigpKnZvbHVtZS5jbHVzdGVyQ291bnQoKS8yLzEwMjQvMTAyNC4wKTsKICByb290Lm9wZW5Sb290KHZvbHVtZSk7CiAgcm9vdC5scyhMU19SIHwgTFNfREFURSB8IExTX1NJWkUpO2lmIChTRC5leGlzdHMoImZpbGVOYW1lLnR4dCIpKSB7CiAgICBTZXJpYWwucHJpbnRsbihTRF9jYXJkX3JlYWRpbmcoImZpbGVOYW1lLnR4dCIpKTsKCiAgfQogIGRhdGFmaWxlID0gU0Qub3BlbigiZmlsZU5hbWUudHh0IiwgRklMRV9XUklURSk7CiAgaWYoZGF0YWZpbGUpewogIAlkYXRhZmlsZS5wcmludCgiaGVsbG8gd29ybGQiKTsKICAJZGF0YWZpbGUucHJpbnRsbigiIik7CiAgCWRhdGFmaWxlLmNsb3NlKCk7CiAgfQp9Cgp2b2lkIGxvb3AoKXsKICAvL+aJk+WNsFNE5Y2h5Y+C5pWw5LiO6K+75YaZ5rWL6K+VCiAgLy9TROWNoeaLpeaciei2heWkp+eahOWtmOWCqOWuuemHj++8jOS4gOiIrOeUqOadpeS/neWtmOajgOa1i+S8oOaEn+WZqOaVsOaNruS4juezu+e7n+WPguaVsAogIC8v5aaC5rip5rm/5bqm5pWw5o2u562J77yM6YCa5bi45L+d5a2Y55qE5pWw5o2u6KaB5Yqg5LiK5pe26Ze05oizCgp9</code>